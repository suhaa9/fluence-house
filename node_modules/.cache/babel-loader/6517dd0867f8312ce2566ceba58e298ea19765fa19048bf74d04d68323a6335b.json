{"ast":null,"code":"import _objectSpread from\"C:/Users/Suha Saleem/Downloads/fluence-house/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import BrandNavbar from\"../../../components/BrandNavbar\";import{db}from\"../../../firebase\";import{collection,getDocs}from\"firebase/firestore\";import{doc,updateDoc}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Applicants=()=>{const[applications,setApplications]=useState([]);const[campaignsMap,setCampaignsMap]=useState({});useEffect(()=>{const fetchData=async()=>{try{const campaignsSnapshot=await getDocs(collection(db,\"campaigns\"));const campaigns={};campaignsSnapshot.forEach(doc=>{campaigns[doc.id]=doc.data().title;});setCampaignsMap(campaigns);const appsSnapshot=await getDocs(collection(db,\"applications\"));const appsData=appsSnapshot.docs.map(doc=>_objectSpread(_objectSpread({id:doc.id},doc.data()),{},{status:doc.data().status||\"Pending\"}));setApplications(appsData);}catch(error){console.error(\"❌ Error loading applications:\",error);}};fetchData();},[]);const handleStatusChange=async(id,newStatus)=>{try{// Update in local state\nconst updated=applications.map(app=>app.id===id?_objectSpread(_objectSpread({},app),{},{status:newStatus}):app);setApplications(updated);// Update in Firebase\nconst docRef=doc(db,\"applications\",id);await updateDoc(docRef,{status:newStatus});console.log(\"\\u2705 Status updated to \".concat(newStatus,\" in Firestore\"));}catch(error){console.error(\"❌ Error updating status:\",error);alert(\"Failed to update status.\");}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BrandNavbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-5xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-pink-600 text-center mb-6\",children:\"Campaign Applicants\"}),applications.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500\",children:\"No applications yet.\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"w-full table-auto border-collapse shadow-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-pink-100 text-pink-800 text-left\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Influencer\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Campaign\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Applied At\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:applications.map(app=>{var _app$appliedAt;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b hover:bg-pink-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-3 font-medium\",children:app.influencer}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:campaignsMap[app.campaignId]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-sm text-gray-600\",children:(_app$appliedAt=app.appliedAt)===null||_app$appliedAt===void 0?void 0:_app$appliedAt.toDate().toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-semibold \".concat(app.status===\"Approved\"?\"bg-green-200 text-green-800\":app.status===\"Rejected\"?\"bg-red-200 text-red-700\":\"bg-yellow-100 text-yellow-800\"),children:app.status})}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3 space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusChange(app.id,\"Approved\"),className:\"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600\",children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusChange(app.id,\"Rejected\"),className:\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600\",children:\"Reject\"})]})]},app.id);})})]})]})]});};export default Applicants;","map":{"version":3,"names":["React","useEffect","useState","BrandNavbar","db","collection","getDocs","doc","updateDoc","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Applicants","applications","setApplications","campaignsMap","setCampaignsMap","fetchData","campaignsSnapshot","campaigns","forEach","id","data","title","appsSnapshot","appsData","docs","map","_objectSpread","status","error","console","handleStatusChange","newStatus","updated","app","docRef","log","concat","alert","children","className","length","_app$appliedAt","influencer","campaignId","appliedAt","toDate","toLocaleString","onClick"],"sources":["C:/Users/Suha Saleem/Downloads/fluence-house/src/pages/public/brand/Applicants.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport BrandNavbar from \"../../../components/BrandNavbar\";\r\nimport { db } from \"../../../firebase\";\r\nimport { collection, getDocs } from \"firebase/firestore\";\r\nimport { doc, updateDoc } from \"firebase/firestore\";\r\n\r\nconst Applicants = () => {\r\n  const [applications, setApplications] = useState([]);\r\n  const [campaignsMap, setCampaignsMap] = useState({});\r\n\r\nuseEffect(() => {\r\n  const fetchData = async () => {\r\n    try {\r\n      const campaignsSnapshot = await getDocs(collection(db, \"campaigns\"));\r\n      const campaigns = {};\r\n      campaignsSnapshot.forEach((doc) => {\r\n        campaigns[doc.id] = doc.data().title;\r\n      });\r\n      setCampaignsMap(campaigns);\r\n\r\n      const appsSnapshot = await getDocs(collection(db, \"applications\"));\r\n      const appsData = appsSnapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n        status: doc.data().status || \"Pending\",\r\n      }));\r\n\r\n      setApplications(appsData);\r\n    } catch (error) {\r\n      console.error(\"❌ Error loading applications:\", error);\r\n    }\r\n  };\r\n\r\n  fetchData();\r\n}, []);\r\n\r\nconst handleStatusChange = async (id, newStatus) => {\r\n  try {\r\n    // Update in local state\r\n    const updated = applications.map((app) =>\r\n      app.id === id ? { ...app, status: newStatus } : app\r\n    );\r\n    setApplications(updated);\r\n\r\n    // Update in Firebase\r\n    const docRef = doc(db, \"applications\", id);\r\n    await updateDoc(docRef, {\r\n      status: newStatus,\r\n    });\r\n\r\n    console.log(`✅ Status updated to ${newStatus} in Firestore`);\r\n  } catch (error) {\r\n    console.error(\"❌ Error updating status:\", error);\r\n    alert(\"Failed to update status.\");\r\n  }\r\n};\r\n\r\n  return (\r\n    <>\r\n      <BrandNavbar />\r\n      <div className=\"p-6 max-w-5xl mx-auto\">\r\n        <h1 className=\"text-3xl font-bold text-pink-600 text-center mb-6\">\r\n          Campaign Applicants\r\n        </h1>\r\n\r\n        {applications.length === 0 ? (\r\n          <p className=\"text-center text-gray-500\">No applications yet.</p>\r\n        ) : (\r\n          <table className=\"w-full table-auto border-collapse shadow-sm\">\r\n          <thead>\r\n          <tr className=\"bg-pink-100 text-pink-800 text-left\">\r\n          <th className=\"p-3\">Influencer</th>\r\n          <th className=\"p-3\">Campaign</th>\r\n          <th className=\"p-3\">Applied At</th>\r\n          <th className=\"p-3\">Status</th>\r\n          <th className=\"p-3\">Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n<tbody>\r\n  {applications.map((app) => (\r\n    <tr key={app.id} className=\"border-b hover:bg-pink-50\">\r\n      <td className=\"p-3 font-medium\">{app.influencer}</td>\r\n      <td className=\"p-3\">{campaignsMap[app.campaignId]}</td>\r\n      <td className=\"p-3 text-sm text-gray-600\">\r\n        {app.appliedAt?.toDate().toLocaleString()}\r\n      </td>\r\n      <td className=\"p-3\">\r\n        <span\r\n          className={`px-3 py-1 rounded-full text-sm font-semibold ${\r\n            app.status === \"Approved\"\r\n              ? \"bg-green-200 text-green-800\"\r\n              : app.status === \"Rejected\"\r\n              ? \"bg-red-200 text-red-700\"\r\n              : \"bg-yellow-100 text-yellow-800\"\r\n          }`}\r\n        >\r\n          {app.status}\r\n        </span>\r\n      </td>\r\n      <td className=\"p-3 space-x-2\">\r\n        <button\r\n          onClick={() => handleStatusChange(app.id, \"Approved\")}\r\n          className=\"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600\"\r\n        >\r\n          Approve\r\n        </button>\r\n        <button\r\n          onClick={() => handleStatusChange(app.id, \"Rejected\")}\r\n          className=\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600\"\r\n        >\r\n          Reject\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  ))}\r\n</tbody>\r\n\r\n          </table>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Applicants;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}